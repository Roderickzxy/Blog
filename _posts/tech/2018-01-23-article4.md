---
layout: post
title:  "搭建docker环境"
crawlertitle: "搭建docker环境"
summary: "在ubuntu上搭建docker"
date:   2018-01-23 13:24:56 +0700
cataname: 积累，等待，蜕变
category: tech/2018-01-23
tags: 'tech-Docker'
author: Roderick
---
准备好虚拟机，这里使用ubuntu16.04.
官方要求系统：
[![attache1]({{ site.article_attachedimages | relative_url }}/tech/article4-attache1.jpg)]({{ site.article_attachedimages | relative_url }}/article4-attache1.jpg)  

## 1.卸载旧版docker： （老版本可能是docker也可能是docker-engine）##
{% highlight shell %}
$ sudo apt-get remove docker docker-engine docker.io
{% endhighlight %}   
## 2.搭建repository ##

### 2.1 更新apt包： ###
{% highlight shell %}
$ sudo apt-get update  
{% endhighlight %}   
### 2.2 安装相关包使apt可以使用https： ###
{% highlight shell %}
$ sudo apt-get install \  
    apt-transport-https \  
    ca-certificates \  
    curl \  
    software-properties-common  
{% endhighlight %}  
### 2.3 添加docker官方的GPG key ###
{% highlight shell %}
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -  
{% endhighlight %}  
校验一下是不是已经有那个key了  
{% highlight shell %}
$ sudo apt-key fingerprint 0EBFCD88  
pub   4096R/0EBFCD88 2017-02-22
      Key fingerprint = 9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88  
uid                  Docker Release (CE deb) <docker@docker.com>  
sub   4096R/F273FCD8 2017-02-22
{% endhighlight %}
### 2.4 添加docker源 ###
我的cpu支持am64指令集，所以直接使用如下命令：（edge test 都是源）  
{% highlight shell %}
$ sudo add-apt-repository \  
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \  
   $(lsb_release -cs) \  
   stable edge test"  
{% endhighlight %}

## 3 安装docker ce ##
### 3.1 更新apt包： ###
{% highlight shell %}
$ sudo apt-get update  
{% endhighlight %} 
### 3.2 安装最新版本的docker ###
{% highlight shell %}
$ sudo apt-get install docker-ce  
{% endhighlight %} 
另外有指定版本下载docker的方式，这里就不讲述了。
如果上述安装步骤不能成功执行，可以使用一个叫convenience script的方式去安装。  
[![attache1]({{ site.article_attachedimages | relative_url }}/tech/article4-attache2.jpg)]({{ site.article_attachedimages | relative_url }}/article4-attache2.jpg)  